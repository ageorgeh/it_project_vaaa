{"ast":null,"code":"import { initializeApp, deleteApp } from 'firebase/app';\nimport { getFirestore, collection, getDocs, query, where, addDoc } from 'firebase/firestore';\nimport { GoogleAuthProvider, getAuth, signInWithPopup, // signInWithEmailAndPassword,\n// createUserWithEmailAndPassword,\n// sendPasswordResetEmail,\nsignOut } from 'firebase/auth';\nconst firebaseConfig = {\n  apiKey: 'AIzaSyAaeqcgpLuc8grPbbZreVXyYIWU8gfpp6k',\n  authDomain: 'it-project-vaah-dev.firebaseapp.com',\n  projectId: 'it-project-vaah-dev',\n  storageBucket: 'it-project-vaah-dev.appspot.com',\n  messagingSenderId: '412593831296',\n  appId: '1:412593831296:web:b6f1db57e42cc73cfe5565'\n};\nconst app = initializeApp(firebaseConfig); // fetching data from firebase\n\nconst db = getFirestore(app); // collection ref\n\nconst colRef = collection(db, 'books');\nconst books = []; // get an array of all the documents in the collection 'books'\n\ngetDocs(colRef).then(snapshot => {\n  snapshot.docs.forEach(doc => {\n    books.push({ ...doc.data(),\n      id: doc.id\n    });\n  });\n}).catch(err => {\n  console.log(err.message);\n});\nconsole.log(books);\nconst auth = getAuth(app);\nconst googleProvider = new GoogleAuthProvider(); // A function to sign in with a google popup\n// Also adds the user information to the firestore DB if they don't already exist\n\nconst signInWithGoogle = async () => {\n  try {\n    const res = await signInWithPopup(auth, googleProvider);\n    const user = res.user;\n    const q = query(collection(db, 'users'), where('uid', '==', user.uid));\n    const docs = await getDocs(q);\n\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, 'users'), {\n        uid: user.uid,\n        name: user.displayName,\n        authProvider: 'google',\n        email: user.email\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n}; // Logs the user out\n\n\nconst logout = () => {\n  signOut(auth);\n};\n\nexport { auth, db, signInWithGoogle, logout };","map":{"version":3,"names":["initializeApp","deleteApp","getFirestore","collection","getDocs","query","where","addDoc","GoogleAuthProvider","getAuth","signInWithPopup","signOut","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","db","colRef","books","then","snapshot","docs","forEach","doc","push","data","id","catch","err","console","log","message","auth","googleProvider","signInWithGoogle","res","user","q","uid","length","name","displayName","authProvider","email","error","alert","logout"],"sources":["/Users/henryhamer/Documents/2022-2/itproject/repo/it_project_vaaa/client/src/firebase-setup.js"],"sourcesContent":["\nimport { initializeApp, deleteApp } from 'firebase/app'\nimport {\n  getFirestore, collection, getDocs,\n  query,\n  where,\n  addDoc\n} from 'firebase/firestore'\n\nimport {\n  GoogleAuthProvider,\n  getAuth,\n  signInWithPopup,\n  // signInWithEmailAndPassword,\n  // createUserWithEmailAndPassword,\n  // sendPasswordResetEmail,\n  signOut\n} from 'firebase/auth'\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyAaeqcgpLuc8grPbbZreVXyYIWU8gfpp6k',\n  authDomain: 'it-project-vaah-dev.firebaseapp.com',\n  projectId: 'it-project-vaah-dev',\n  storageBucket: 'it-project-vaah-dev.appspot.com',\n  messagingSenderId: '412593831296',\n  appId: '1:412593831296:web:b6f1db57e42cc73cfe5565'\n}\n\nconst app = initializeApp(firebaseConfig)\n\n// fetching data from firebase\nconst db = getFirestore(app)\n\n// collection ref\nconst colRef = collection(db, 'books')\n\nconst books = []\n\n// get an array of all the documents in the collection 'books'\ngetDocs(colRef)\n  .then(snapshot => {\n    snapshot.docs.forEach(doc => {\n      books.push({ ...doc.data(), id: doc.id })\n    })\n  })\n  .catch(err => {\n    console.log(err.message)\n  })\n\nconsole.log(books)\n\nconst auth = getAuth(app)\n\nconst googleProvider = new GoogleAuthProvider()\n\n// A function to sign in with a google popup\n// Also adds the user information to the firestore DB if they don't already exist\nconst signInWithGoogle = async () => {\n  try {\n    const res = await signInWithPopup(auth, googleProvider)\n    const user = res.user\n    const q = query(collection(db, 'users'), where('uid', '==', user.uid))\n    const docs = await getDocs(q)\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, 'users'), {\n        uid: user.uid,\n        name: user.displayName,\n        authProvider: 'google',\n        email: user.email\n      })\n    }\n  } catch (err) {\n    console.error(err)\n    alert(err.message)\n  }\n}\n\n// Logs the user out\nconst logout = () => {\n  signOut(auth)\n}\n\n\nexport {\n  auth,\n  db,\n  signInWithGoogle,\n  logout, \n}\n"],"mappings":"AACA,SAASA,aAAT,EAAwBC,SAAxB,QAAyC,cAAzC;AACA,SACEC,YADF,EACgBC,UADhB,EAC4BC,OAD5B,EAEEC,KAFF,EAGEC,KAHF,EAIEC,MAJF,QAKO,oBALP;AAOA,SACEC,kBADF,EAEEC,OAFF,EAGEC,eAHF,EAIE;AACA;AACA;AACAC,OAPF,QAQO,eARP;AAUA,MAAMC,cAAc,GAAG;EACrBC,MAAM,EAAE,yCADa;EAErBC,UAAU,EAAE,qCAFS;EAGrBC,SAAS,EAAE,qBAHU;EAIrBC,aAAa,EAAE,iCAJM;EAKrBC,iBAAiB,EAAE,cALE;EAMrBC,KAAK,EAAE;AANc,CAAvB;AASA,MAAMC,GAAG,GAAGnB,aAAa,CAACY,cAAD,CAAzB,C,CAEA;;AACA,MAAMQ,EAAE,GAAGlB,YAAY,CAACiB,GAAD,CAAvB,C,CAEA;;AACA,MAAME,MAAM,GAAGlB,UAAU,CAACiB,EAAD,EAAK,OAAL,CAAzB;AAEA,MAAME,KAAK,GAAG,EAAd,C,CAEA;;AACAlB,OAAO,CAACiB,MAAD,CAAP,CACGE,IADH,CACQC,QAAQ,IAAI;EAChBA,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAsBC,GAAG,IAAI;IAC3BL,KAAK,CAACM,IAAN,CAAW,EAAE,GAAGD,GAAG,CAACE,IAAJ,EAAL;MAAiBC,EAAE,EAAEH,GAAG,CAACG;IAAzB,CAAX;EACD,CAFD;AAGD,CALH,EAMGC,KANH,CAMSC,GAAG,IAAI;EACZC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACD,CARH;AAUAF,OAAO,CAACC,GAAR,CAAYZ,KAAZ;AAEA,MAAMc,IAAI,GAAG3B,OAAO,CAACU,GAAD,CAApB;AAEA,MAAMkB,cAAc,GAAG,IAAI7B,kBAAJ,EAAvB,C,CAEA;AACA;;AACA,MAAM8B,gBAAgB,GAAG,YAAY;EACnC,IAAI;IACF,MAAMC,GAAG,GAAG,MAAM7B,eAAe,CAAC0B,IAAD,EAAOC,cAAP,CAAjC;IACA,MAAMG,IAAI,GAAGD,GAAG,CAACC,IAAjB;IACA,MAAMC,CAAC,GAAGpC,KAAK,CAACF,UAAU,CAACiB,EAAD,EAAK,OAAL,CAAX,EAA0Bd,KAAK,CAAC,KAAD,EAAQ,IAAR,EAAckC,IAAI,CAACE,GAAnB,CAA/B,CAAf;IACA,MAAMjB,IAAI,GAAG,MAAMrB,OAAO,CAACqC,CAAD,CAA1B;;IACA,IAAIhB,IAAI,CAACA,IAAL,CAAUkB,MAAV,KAAqB,CAAzB,EAA4B;MAC1B,MAAMpC,MAAM,CAACJ,UAAU,CAACiB,EAAD,EAAK,OAAL,CAAX,EAA0B;QACpCsB,GAAG,EAAEF,IAAI,CAACE,GAD0B;QAEpCE,IAAI,EAAEJ,IAAI,CAACK,WAFyB;QAGpCC,YAAY,EAAE,QAHsB;QAIpCC,KAAK,EAAEP,IAAI,CAACO;MAJwB,CAA1B,CAAZ;IAMD;EACF,CAbD,CAaE,OAAOf,GAAP,EAAY;IACZC,OAAO,CAACe,KAAR,CAAchB,GAAd;IACAiB,KAAK,CAACjB,GAAG,CAACG,OAAL,CAAL;EACD;AACF,CAlBD,C,CAoBA;;;AACA,MAAMe,MAAM,GAAG,MAAM;EACnBvC,OAAO,CAACyB,IAAD,CAAP;AACD,CAFD;;AAKA,SACEA,IADF,EAEEhB,EAFF,EAGEkB,gBAHF,EAIEY,MAJF"},"metadata":{},"sourceType":"module"}